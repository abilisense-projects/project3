{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport React, { useState, useEffect } from 'react';\nimport { Audio } from 'expo-av';\nimport * as FileSystem from 'expo-file-system';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    recording = _useState2[0],\n    setRecording = _useState2[1];\n  var _useState3 = useState('idle'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    recordingStatus = _useState4[0],\n    setRecordingStatus = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    audioPermission = _useState6[0],\n    setAudioPermission = _useState6[1];\n  useEffect(function () {\n    function getPermission() {\n      return _getPermission.apply(this, arguments);\n    }\n    function _getPermission() {\n      _getPermission = _asyncToGenerator(function* () {\n        yield Audio.requestPermissionsAsync().then(function (permission) {\n          console.log('Permission Granted: ' + permission.granted);\n          setAudioPermission(permission.granted);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      });\n      return _getPermission.apply(this, arguments);\n    }\n    getPermission();\n    return function () {\n      if (recording) {\n        stopRecording();\n      }\n    };\n  }, []);\n  function startRecording() {\n    return _startRecording.apply(this, arguments);\n  }\n  function _startRecording() {\n    _startRecording = _asyncToGenerator(function* () {\n      try {\n        if (audioPermission) {\n          yield Audio.setAudioModeAsync({\n            allowsRecordingIOS: true,\n            playsInSilentModeIOS: true\n          });\n        }\n        var newRecording = new Audio.Recording();\n        console.log('Starting Recording');\n        yield newRecording.prepareToRecordAsync(Audio.RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\n        yield newRecording.startAsync();\n        setRecording(newRecording);\n        setRecordingStatus('recording');\n      } catch (error) {\n        console.error('Failed to start recording', error);\n      }\n    });\n    return _startRecording.apply(this, arguments);\n  }\n  function stopRecording() {\n    return _stopRecording.apply(this, arguments);\n  }\n  function _stopRecording() {\n    _stopRecording = _asyncToGenerator(function* () {\n      try {\n        if (recordingStatus === 'recording') {\n          console.log('Stopping Recording');\n          yield recording.stopAndUnloadAsync();\n          var recordingUri = recording.getURI();\n          var fileName = `recording-${Date.now()}.caf`;\n          yield FileSystem.makeDirectoryAsync(FileSystem.documentDirectory + 'recordings/', {\n            intermediates: true\n          });\n          yield FileSystem.moveAsync({\n            from: recordingUri,\n            to: FileSystem.documentDirectory + 'recordings/' + `${fileName}`\n          });\n          var playbackObject = new Audio.Sound();\n          yield playbackObject.loadAsync({\n            uri: FileSystem.documentDirectory + 'recordings/' + `${fileName}`\n          });\n          yield playbackObject.playAsync();\n          setRecording(null);\n          setRecordingStatus('stopped');\n        }\n      } catch (error) {\n        console.error('Failed to stop recording', error);\n      }\n    });\n    return _stopRecording.apply(this, arguments);\n  }\n  function handleRecordButtonPress() {\n    return _handleRecordButtonPress.apply(this, arguments);\n  }\n  function _handleRecordButtonPress() {\n    _handleRecordButtonPress = _asyncToGenerator(function* () {\n      if (recording) {\n        var audioUri = yield stopRecording(recording);\n        if (audioUri) {\n          console.log('Saved audio file to', savedUri);\n        }\n      } else {\n        yield startRecording();\n      }\n    });\n    return _handleRecordButtonPress.apply(this, arguments);\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TouchableOpacity, {\n      style: styles.button,\n      onPress: handleRecordButtonPress,\n      children: _jsx(FontAwesome, {\n        name: recording ? 'stop-circle' : 'circle',\n        size: 64,\n        color: \"white\"\n      })\n    }), _jsx(Text, {\n      style: styles.recordingStatusText,\n      children: `Recording status: ${recordingStatus}`\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  button: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 128,\n    height: 128,\n    borderRadius: 64,\n    backgroundColor: 'red'\n  },\n  recordingStatusText: {\n    marginTop: 16\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","Audio","FileSystem","FontAwesome","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","recording","setRecording","_useState3","_useState4","recordingStatus","setRecordingStatus","_useState5","_useState6","audioPermission","setAudioPermission","getPermission","_getPermission","apply","arguments","_asyncToGenerator","requestPermissionsAsync","then","permission","console","log","granted","catch","error","stopRecording","startRecording","_startRecording","setAudioModeAsync","allowsRecordingIOS","playsInSilentModeIOS","newRecording","Recording","prepareToRecordAsync","RECORDING_OPTIONS_PRESET_HIGH_QUALITY","startAsync","_stopRecording","stopAndUnloadAsync","recordingUri","getURI","fileName","Date","now","makeDirectoryAsync","documentDirectory","intermediates","moveAsync","from","to","playbackObject","Sound","loadAsync","uri","playAsync","handleRecordButtonPress","_handleRecordButtonPress","audioUri","savedUri","View","style","styles","container","children","TouchableOpacity","button","onPress","name","size","color","Text","recordingStatusText","StyleSheet","create","flex","alignItems","justifyContent","width","height","borderRadius","backgroundColor","marginTop"],"sources":["C:/Users/h0533/Desktop/project3/autisem-translator/client/components/recording.js"],"sourcesContent":["import { Text, TouchableOpacity, View, StyleSheet } from 'react-native';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Audio } from 'expo-av';\r\nimport * as FileSystem from 'expo-file-system';\r\nimport { FontAwesome } from '@expo/vector-icons';\r\n\r\nexport default function App() {\r\n\r\n  const [recording, setRecording] = useState(null);\r\n  const [recordingStatus, setRecordingStatus] = useState('idle');\r\n  const [audioPermission, setAudioPermission] = useState(null);\r\n\r\n  useEffect(() => {\r\n\r\n    // Simply get recording permission upon first render\r\n    async function getPermission() {\r\n      await Audio.requestPermissionsAsync().then((permission) => {\r\n        console.log('Permission Granted: ' + permission.granted);\r\n        setAudioPermission(permission.granted)\r\n      }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    }\r\n\r\n    // Call function to get permission\r\n    getPermission()\r\n    // Cleanup upon first render\r\n    return () => {\r\n      if (recording) {\r\n        stopRecording();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  async function startRecording() {\r\n    try {\r\n      // needed for IoS\r\n      if (audioPermission) {\r\n        await Audio.setAudioModeAsync({\r\n          allowsRecordingIOS: true,\r\n          playsInSilentModeIOS: true\r\n        })\r\n      }\r\n\r\n      const newRecording = new Audio.Recording();\r\n      console.log('Starting Recording')\r\n      await newRecording.prepareToRecordAsync(Audio.RECORDING_OPTIONS_PRESET_HIGH_QUALITY);\r\n      await newRecording.startAsync();\r\n      setRecording(newRecording);\r\n      setRecordingStatus('recording');\r\n\r\n    } catch (error) {\r\n      console.error('Failed to start recording', error);\r\n    }\r\n  }\r\n\r\n  async function stopRecording() {\r\n    try {\r\n\r\n      if (recordingStatus === 'recording') {\r\n        console.log('Stopping Recording')\r\n        await recording.stopAndUnloadAsync();\r\n        const recordingUri = recording.getURI();\r\n\r\n        // Create a file name for the recording\r\n        const fileName = `recording-${Date.now()}.caf`;\r\n\r\n        // Move the recording to the new directory with the new file name\r\n        await FileSystem.makeDirectoryAsync(FileSystem.documentDirectory + 'recordings/', { intermediates: true });\r\n        await FileSystem.moveAsync({\r\n          from: recordingUri,\r\n          to: FileSystem.documentDirectory + 'recordings/' + `${fileName}`\r\n        });\r\n\r\n        // This is for simply playing the sound back\r\n        const playbackObject = new Audio.Sound();\r\n        await playbackObject.loadAsync({ uri: FileSystem.documentDirectory + 'recordings/' + `${fileName}` });\r\n        await playbackObject.playAsync();\r\n\r\n        // resert our states to record again\r\n        setRecording(null);\r\n        setRecordingStatus('stopped');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Failed to stop recording', error);\r\n    }\r\n  }\r\n\r\n  async function handleRecordButtonPress() {\r\n    if (recording) {\r\n      const audioUri = await stopRecording(recording);\r\n      if (audioUri) {\r\n        console.log('Saved audio file to', savedUri);\r\n      }\r\n    } else {\r\n      await startRecording();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <TouchableOpacity style={styles.button} onPress={handleRecordButtonPress}>\r\n        <FontAwesome name={recording ? 'stop-circle' : 'circle'} size={64} color=\"white\" />\r\n      </TouchableOpacity>\r\n      <Text style={styles.recordingStatusText}>{`Recording status: ${recordingStatus}`}</Text>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  button: {\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    width: 128,\r\n    height: 128,\r\n    borderRadius: 64,\r\n    backgroundColor: 'red',\r\n  },\r\n  recordingStatusText: {\r\n    marginTop: 16,\r\n  },\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}